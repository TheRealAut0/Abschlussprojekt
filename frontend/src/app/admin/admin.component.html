<div class="admin-page">
  <header class="admin-header">
    <h1>Benutzerverwaltung</h1>
    <div class="controls">
      <input class="search" type="search" placeholder="Benutzer suchen..." />
      <button class="btn primary">Neuen Benutzer</button>
    </div>
  </header>

  <main class="admin-main">
    <section class="card">
      <div class="table-top">
        <h2>Benutzerliste</h2>
        <small>Rechte hier vergeben / entziehen</small>
      </div>

      <div class="table-wrapper">
        <table class="user-table" role="table" aria-label="Benutzer">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Rolle</th>
              <th class="rights-col">Admin</th>
              <th class="rights-col">Editor</th>
              <th class="rights-col">Viewer</th>
              <th class="actions-col">Aktionen</th>
            </tr>
          </thead>
          <tbody>            
            <tr *ngFor="let user of users">
              <td>{{ (user.first_name || user.name || '') }} {{ user.last_name || '' }}</td>
              <td>{{ user.email }}</td>
              <td>{{ user.role }}</td>
              <td class="center">
                <input type="radio" [checked]="user.isAdmin" (change)="toggleRight(user, 'Admin', $event)" />
              </td>
              <td class="center">
                <input type="radio" [checked]="user.isEditor" (change)="toggleRight(user, 'Editor', $event)" />
              </td>
              <td class="center">
                <input type="radio" [checked]="user.isViewer" (change)="toggleRight(user, 'Viewer', $event)" />
              </td>
              <td class="actions-col">
                <button class="btn small" (click)="editUser(user)">Bearbeiten</button>
                <button class="btn danger small" (click)="deleteUser(user)">Löschen</button>
              </td>
            </tr>

            <tr *ngIf="!users || users.length === 0">
              <td colspan="7" class="no-data">Keine Benutzer gefunden.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="table-footer">
        <button class="btn secondary" (click)="saveChanges()">Änderungen speichern</button>
      </div>
    </section>
  </main>
</div>
